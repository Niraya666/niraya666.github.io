<!DOCTYPE html>
<html lang="en" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.134.2"><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>LZY Blog</title>

<meta name="description" content="">
<meta name="author" content="Theme PaperMod">
<link rel="canonical" href="https://niraya666.github.io/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css" integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z&#43;V9&#43;cO1A=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://niraya666.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://niraya666.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://niraya666.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://niraya666.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://niraya666.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="https://niraya666.github.io/index.xml">
<link rel="alternate" type="application/json" href="https://niraya666.github.io/index.json">
<link rel="alternate" hreflang="en" href="https://niraya666.github.io/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="LZY Blog" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://niraya666.github.io/" />
<meta property="og:image" content="https://niraya666.github.io/images/papermod-cover.png" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://niraya666.github.io/images/papermod-cover.png" />
<meta name="twitter:title" content="LZY Blog"/>
<meta name="twitter:description" content=""/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Organization",
  "name": "LZY Blog",
  "url": "https://niraya666.github.io/",
  "description": "",
  "thumbnailUrl": "https://niraya666.github.io/favicon.ico",
  "sameAs": [
      "https://github.com/Niraya666", "mailto:lianzhy95@gmail.com", "https://ko-fi.com"
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://niraya666.github.io/" accesskey="h" title="LZY Blog (Alt + H)">LZY Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://niraya666.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://niraya666.github.io/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://niraya666.github.io/musik/" title="musik!">
                    <span>musik!</span>
                </a>
            </li>
            <li>
                <a href="https://niraya666.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://niraya666.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://niraya666.github.io/monthly/" title="æœˆåˆŠ">
                    <span>æœˆåˆŠ</span>
                </a>
            </li>
            <li>
                <a href="https://niraya666.github.io/essay/" title="æ‚æ–‡">
                    <span>æ‚æ–‡</span>
                </a>
            </li>
            <li>
                <a href="https://niraya666.github.io/travel/" title="æ¸¸è®°">
                    <span>æ¸¸è®°</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<article class="first-entry home-info">
    <header class="entry-header">
        <h1>Hi there ğŸ‘‹</h1>
    </header>
    <div class="entry-content">
        Welcome to my Blog
    </div>
    <footer class="entry-footer">
        <div class="social-icons" >
    <a href="https://github.com/Niraya666" target="_blank" rel="noopener noreferrer me"
        title="View Source on Github">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
    </a>
    <a href="mailto:lianzhy95@gmail.com" target="_blank" rel="noopener noreferrer me"
        title="Send Me an Email">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 21" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
    <polyline points="22,6 12,13 2,6"></polyline>
</svg>
    </a>
    <a href="https://ko-fi.com" target="_blank" rel="noopener noreferrer me"
        title="Buy Me a Ko-Fi :)">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid meet"
    viewBox="0 -3 23 27" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"
    stroke-linejoin="round">
    <path
        d="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604 0-.679.798-.679.798s-.082 7.324-.022 11.822c.164 2.424 2.586 2.672 2.586 2.672s8.267-.023 11.966-.049c2.438-.426 2.683-2.566 2.658-3.734c4.352.24 7.422-2.831 6.649-6.916zm-11.062 3.511c-1.246 1.453-4.011 3.976-4.011 3.976s-.121.119-.31.023c-.076-.057-.108-.09-.108-.09c-.443-.441-3.368-3.049-4.034-3.954c-.709-.965-1.041-2.7-.091-3.71c.951-1.01 3.005-1.086 4.363.407c0 0 1.565-1.782 3.468-.963c1.904.82 1.832 3.011.723 4.311zm6.173.478c-.928.116-1.682.028-1.682.028V7.284h1.77s1.971.551 1.971 2.638c0 1.913-.985 2.667-2.059 3.015z" />
</svg>
    </a>
</div>

    </footer>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Agent å­¦ä¹ ç¬”è®°ï¼šæ¡†æ¶ ï½œ openAI Swarm
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h2>
  </header>
  <div class="entry-content">
    <p>å¼€ç¯‡ â€œCloseAIâ€ ç»ˆäºåˆå¼€æºäº†æ–°çš„é¡¹ç›®ï¼Œå¯æƒœOpenAIæ˜ç¡®è¡¨ç¤ºï¼ŒSwarmæ˜¯ä¸€ä¸ªå®éªŒæ€§æ¡†æ¶ï¼Œä¸»è¦ç”¨äºæ•™è‚²ç›®çš„ï¼Œä¸é€‚åˆç”Ÿäº§ç¯å¢ƒï¼Œä¹Ÿæ²¡æœ‰å®˜æ–¹æ”¯æŒã€‚ä¸è¿‡ä»è¿™æ ·ä¸€ä¸ªå®éªŒæ€§çš„æ¡†æ¶ï¼Œè‡³å°‘èƒ½å¤Ÿäº†è§£åˆ°OpenAIå¯¹äºAgentä¸Šçš„ä¸€äº›ç†è§£ï¼Œå¯¹äºAgentè®¾è®¡ä¸Šèƒ½å¤Ÿæœ‰æ‰€å¸®åŠ©å’Œå€Ÿé‰´ã€‚
Routines and Handoffs æ ¹æ®openAI cookbook: Orchestrating Agents: Routines and Handoffs**ï¼Œ**ç†è§£è¿™ä¸ªæ¡†æ¶å‰é¦–å…ˆéœ€è¦ç†è§£çš„ä¸¤ä¸ªæ¦‚å¿µï¼š Routines å’Œ Handoffsã€‚
The notion of a â€œroutineâ€ is not strictly defined, and instead meant to capture the idea of a set of steps. Concretely, letâ€™s define a routine to be a list of instructions in natural language (which weâ€™ll represent with a system prompt), along with the tools necessary to complete them.
Routinesï¼ˆå¸¸è§„ï¼‰ï¼šæ˜¯ç”±ä¸€ç³»åˆ—æ­¥éª¤æ„æˆçš„æµç¨‹ï¼Œå¯ä»¥ç†è§£ä¸ºç»™å®šä»»åŠ¡çš„æ‰§è¡Œæ­¥éª¤ï¼ŒåŒ…æ‹¬å¯¹è¯ç³»ç»Ÿä¸­æŒ‡ä»¤å’Œæ‰€éœ€å·¥å…·çš„ç»„åˆã€‚ä»ä»£ç å®ç°ä¸Šï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯å›´ç»•ç€openAI çš„ openai.chat.completions.createAPIçš„ä¸€ç³»åˆ—å†…å®¹ï¼Œ å¯¹è¯ã€å·¥å…·è°ƒç”¨ç­‰ã€‚æ¢å¥è¯è¯´ï¼Œroutinesåªæ˜¯å…·æœ‰å¯¹è¯&#43;å·¥å…·è°ƒç”¨çš„chatbotï¼Œè¿™ä¹Ÿæ˜¯openAIå¯¹äºAgentçš„åŸºç¡€æŠ½è±¡ã€‚
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-11-11 11:10:00 +0800 CST'>November 11, 2024</span>&nbsp;Â·&nbsp;12 min&nbsp;Â·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to Agent å­¦ä¹ ç¬”è®°ï¼šæ¡†æ¶ ï½œ openAI Swarm" href="https://niraya666.github.io/posts/agent-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%A1%86%E6%9E%B6--openai-swarm/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">RAGå·¥å…·ç®±ï¼šQuery Enhancement
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h2>
  </header>
  <div class="entry-content">
    <p>å¼•è¨€ é¦–å…ˆï¼Œä»æœ€ç®€å•çš„RAGï¼ˆRetrieval-Augmented Generationï¼‰è°ˆèµ·ã€‚
RAGç»“åˆäº†ä¿¡æ¯æ£€ç´¢ä¸ç”Ÿæˆæ¨¡å‹ï¼Œå…ˆé€šè¿‡ç”¨æˆ·çš„åŸå§‹é—®é¢˜query åœ¨çŸ¥è¯†åº“ä¸­æ£€ç´¢ä¸ç›¸å…³çš„æ–‡æ¡£ï¼Œå†åˆ©ç”¨ç”Ÿæˆæ¨¡å‹ï¼ˆå¦‚ChatGPTï¼‰ç”Ÿæˆå›ç­”ã€‚æœ€ç®€å•çš„RAGç‰ˆæœ¬é€šå¸¸è¢«ç§°ä¸ºNaive-RAGï¼Œè™½ç„¶Naive-RAGèƒ½å¤Ÿå¤„ç†ä¸€äº›ç®€å•çš„é—®é¢˜ï¼Œä½†åœ¨çœŸå®åœºæ™¯ä¸‹ï¼Œç”¨æˆ·æå‡ºçš„é—®é¢˜å¾€å¾€æ›´åŠ å¤æ‚å¤šæ ·ï¼Œè¿œè¿œè¶…å‡ºç³»ç»Ÿæœ€åˆè®¾è®¡çš„é¢„æœŸèŒƒå›´ã€‚
åœ¨ç”¨æˆ·ä¸RAGç³»ç»Ÿäº¤äº’æ—¶ï¼Œå¾€å¾€ä¼šé‡åˆ°ä»¥ä¸‹å‡ ç§å¸¸è§é—®é¢˜ï¼š
è¡¨è¾¾æ¨¡ç³Šä¸æ¸…ï¼šç”¨æˆ·åœ¨æè¿°é—®é¢˜æ—¶ï¼Œå¾€å¾€éš¾ä»¥ç²¾å‡†è¡¨è¾¾è‡ªå·±çš„éœ€æ±‚ã€‚ä»–ä»¬å¯èƒ½ä»…ä½¿ç”¨å‡ ä¸ªè¯ç»„æˆ–ç‰‡æ®µï¼Œå¯¼è‡´ç³»ç»Ÿéš¾ä»¥ç†è§£ç”¨æˆ·çš„çœŸå®æ„å›¾ã€‚
ä¾èµ–ä¸Šä¸‹æ–‡ï¼šç”¨æˆ·çš„é—®é¢˜ç»å¸¸ä¾èµ–ä¹‹å‰çš„å¯¹è¯æˆ–èƒŒæ™¯ä¿¡æ¯ï¼Œè€Œç³»ç»Ÿåªæ¥æ”¶åˆ°å½“å‰çš„å­¤ç«‹é—®é¢˜ï¼Œç¼ºå°‘å…³é”®çš„ä¸Šä¸‹æ–‡æ”¯æŒï¼Œæ— æ³•ç»™å‡ºå‡†ç¡®çš„ç­”æ¡ˆã€‚
å¤æ‚å¤šå±‚æ¬¡é—®é¢˜ï¼šæŸäº›é—®é¢˜æœ¬èº«å¤æ‚ï¼ŒåŒ…å«å¤šä¸ªå­é—®é¢˜æˆ–éœ€è¦æ¨ç†ã€é€»è¾‘åˆ†æã€‚Naive-RAGä¾èµ–ç®€å•çš„å…³é”®è¯åŒ¹é…æˆ–è¯­ä¹‰åŒ¹é…ï¼Œæ— æ³•å¾ˆå¥½åœ°å¤„ç†è¿™ç±»å¤æ‚çš„éœ€æ±‚ã€‚
é¢å¯¹è¿™äº›æŒ‘æˆ˜ï¼ŒNaive-RAGçš„å±€é™æ€§å˜å¾—æ˜æ˜¾ï¼šä»…ä»…ä¾é ç”¨æˆ·çš„åŸå§‹queryæ— æ³•åº”å¯¹å¤šæ ·åŒ–çš„æé—®åœºæ™¯ã€‚é‚£ä¹ˆï¼Œå¦‚ä½•æå‡RAGç³»ç»Ÿçš„æ£€ç´¢èƒ½åŠ›ï¼Œå¢å¼ºå¯¹å¤æ‚é—®é¢˜çš„å¤„ç†å‘¢ï¼Ÿè¿™æ—¶å°±éœ€è¦å¼•å…¥Query-EnhancementæŠ€æœ¯ã€‚
Query-Enhancementï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯å¯¹ç”¨æˆ·çš„åŸå§‹queryè¿›è¡Œå¢å¼ºå¤„ç†ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šä¸è¦ç›´æ¥ä½¿ç”¨ç”¨æˆ·çš„åŸå§‹queryè¿›è¡Œç›¸å…³æ–‡æ¡£çš„æ£€ç´¢ï¼Œè€Œæ˜¯é€šè¿‡æŸç§æŠ€æœ¯æ‰‹æ®µå¯¹queryè¿›è¡Œæ”¹å†™ã€æ‰©å±•æˆ–ä¼˜åŒ–ï¼Œä»è€Œç”Ÿæˆä¸€ä¸ªæ›´é€‚åˆæ£€ç´¢çš„queryã€‚è¿™ç§æŠ€æœ¯åœ¨ä¸åŒåœºæ™¯ä¸‹æœ‰ä¸åŒçš„å‘½åï¼Œå¦‚query rewriteæˆ–query reformulationï¼Œä½†æ ¸å¿ƒç›®æ ‡éƒ½æ˜¯ä¸€è‡´çš„â€”â€”æ ¹æ®ç”¨æˆ·çš„åˆå§‹è¾“å…¥ï¼Œç”Ÿæˆä¸€ä¸ªæ›´ç¬¦åˆæ£€ç´¢éœ€æ±‚ã€æ›´èƒ½æå‡æŸ¥è¯¢å‡†ç¡®æ€§çš„æ–°queryã€‚
é€šè¿‡Query-Enhancementï¼Œå¯ä»¥è§£å†³è®¸å¤šNaive-RAGæ— æ³•å¤„ç†çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œé’ˆå¯¹æ¨¡ç³Šæˆ–ç®€çŸ­çš„æé—®ï¼Œå¢å¼ºåçš„queryå¯ä»¥é€šè¿‡æ·»åŠ ä¸Šä¸‹æ–‡æˆ–å…³é”®è¯æ¥ä¸°å¯Œä¿¡æ¯å†…å®¹ï¼›å¯¹äºå¤æ‚çš„å¤šå±‚æ¬¡é—®é¢˜ï¼Œå¢å¼ºåçš„queryå¯ä»¥æ‹†è§£ä¸ºå¤šä¸ªå­é—®é¢˜ï¼Œé€æ­¥è¿›è¡Œæ£€ç´¢ä¸æ¨ç†ã€‚
æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ä¸åŒçš„Query-EnhancementæŠ€æœ¯æ–¹æ¡ˆï¼Œå¹¶åˆ†æè¿™äº›æŠ€æœ¯å¦‚ä½•æ ¹æ®åŸå§‹queryç”Ÿæˆæ›´é«˜æ•ˆçš„æŸ¥è¯¢ï¼Œå¸®åŠ©RAGç³»ç»Ÿåœ¨å¤æ‚åœºæ™¯ä¸‹æä¾›æ›´ç²¾ç¡®çš„ç­”æ¡ˆã€‚
Query Rewrite Because the original query can not be always optimal to retrieve for the LLM, especially in the real worldâ€¦ we first prompt an LLM to rewrite the queries, then conduct retrieval-augmented reading.
Query Rewriteçš„ç›®çš„æ˜¯å°†ç”¨æˆ·æ¨¡ç³Šã€ä¸æ˜ç¡®æˆ–ä¸å®Œæ•´çš„æŸ¥è¯¢è½¬æ¢ä¸ºæ›´é€‚åˆæ£€ç´¢çš„å½¢å¼ï¼Œä»¥æå‡æ£€ç´¢æ•ˆç‡å’Œå‡†ç¡®æ€§ã€‚
ä»…ä½¿ç”¨åŸå§‹queryçš„ç¼ºç‚¹ï¼š
æŸ¥è¯¢å¸¸å¸¸æ¨¡ç³Šã€ä¸å…·ä½“æˆ–ä¸å®Œæ•´ï¼Œå¯¼è‡´éš¾ä»¥æ‰¾åˆ°æœ‰æ•ˆçš„æ£€ç´¢ç»“æœã€‚
ç¼ºä¹æ˜ç¡®æœ¯è¯­ï¼Œæ— æ³•æœ‰æ•ˆä»å¤§å‹æ•°æ®é›†ä¸­æå–ç›¸å…³ä¿¡æ¯ã€‚
å¯¹è¯ä¸Šä¸‹æ–‡ä¸­çš„æŸ¥è¯¢å«ä¹‰å› å¯¹è¯å†å²è€Œå¼‚ï¼ŒåŒæ ·çš„è¡¨è¾¾åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­å¯èƒ½æœ‰ä¸åŒçš„æ„å›¾ã€‚
è¾“å…¥æ–‡æœ¬ä¸çœŸæ­£éœ€è¦æ£€ç´¢çš„çŸ¥è¯†ä¹‹é—´ä¸å¯é¿å…åœ°å­˜åœ¨å·®è·ã€‚è¿™ç§å·®è·é™åˆ¶äº†æ£€ç´¢æ€§èƒ½ï¼Œå¢åŠ äº†å¯¹æ£€ç´¢èƒ½åŠ›å¢å¼ºå’Œæç¤ºå·¥ç¨‹çš„ä¾èµ–ã€‚
ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæ£€ç´¢å™¨ä¹‹å‰å¢åŠ äº†ä¸€æ­¥å¯¹è¾“å…¥è¿›è¡Œæ”¹å†™çš„è¿‡ç¨‹ï¼Œå¡«è¡¥ç»™å®šè¾“å…¥ä¸æ£€ç´¢éœ€æ±‚ä¹‹é—´çš„å·®è·ã€‚è¿™ä¸€æ­¥åˆ©ç”¨äº†LLMæœ¬èº«çš„èƒ½åŠ›å¯¹åŸå§‹æŸ¥è¯¢è¿›è¡Œæœ‰é’ˆå¯¹æ€§çš„æ”¹å†™ã€‚
æ¯”å¦‚ï¼Œæ¥è‡ªRAG_Techniques çš„è¿™æ®µpromptï¼š
query_rewrite_template = &#34;&#34;&#34;You are an AI assistant tasked with reformulating user queries to improve retrieval in a RAG system. Given the original query, rewrite it to be more specific, detailed, and likely to retrieve relevant information. Original query: {original_query} Rewritten query:&#34;&#34;&#34; ä½¿LLMå¯ä»¥æ›´åŠ ç³»ç»Ÿåœ°å°†ç”¨æˆ·çš„åŸå§‹æŸ¥è¯¢æ”¹å†™ä¸ºæ›´ç¬¦åˆæ£€ç´¢éœ€æ±‚çš„å½¢å¼ã€‚
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-10-31 16:04:00 +0800 CST'>October 31, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to RAGå·¥å…·ç®±ï¼šQuery Enhancement" href="https://niraya666.github.io/posts/rag%E5%B7%A5%E5%85%B7%E7%AE%B1query-enhancement/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">LLM è¾“å‡ºé™åˆ¶ï¼šStructured Outputsã€å—é™ç¼–ç å’Œæç¤ºè¯å·¥ç¨‹
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h2>
  </header>
  <div class="entry-content">
    <p>åœ¨ä½¿ç”¨å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸é¢ä¸´ä¸€ä¸ªæŒ‘æˆ˜ï¼šå¦‚ä½•ä»æ¨¡å‹è¾“å‡ºä¸­å‡†ç¡®æå–è‡ªå·±æ‰€éœ€çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬å¸Œæœ›æ¨¡å‹è¾“å‡º JSON æ ¼å¼çš„æ•°æ®æ—¶ï¼Œç”±äºæ¨¡å‹ç”Ÿæˆçš„å†…å®¹å¹¶ä¸æ€»æ˜¯ç¨³å®šï¼Œå¯èƒ½éœ€è¦é¢å¤–ç¼–å†™å¤§é‡çš„æ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…å¹¶æå–å…¶ä¸­çš„æœ‰æ•ˆä¿¡æ¯ã€‚ç„¶è€Œï¼Œç”±äº LLM çš„èƒ½åŠ›ï¼Œå¯¼è‡´å…¶è¾“å‡ºç»“æ„å¹¶ä¸æ°¸è¿œå¯é ã€‚
ç°é˜¶æ®µï¼Œ è®©LLMæŒ‰è¦æ±‚ç”Ÿæˆç‰¹å®šæ ¼å¼æ–‡æœ¬çš„ä¸»è¦æ–¹æ³•æœ‰å‡ ç§ç§ï¼š
å¾®è°ƒï¼šä½¿æ¨¡å‹çš„è¾“å‡ºéµå¾ªç‰¹å®šæ ¼å¼
OpenAI Json-mode/Structured Outputs/function-calling: è¿™äº›åŠŸèƒ½å…è®¸æ¨¡å‹ç”Ÿæˆæ›´ä¸¥æ ¼ã€ç»“æ„åŒ–çš„è¾“å‡ºï¼Œä½†å—é™äºopenAIå¹³å°ã€‚
æ ¼å¼çº¦æŸï¼šåœ¨decodingé˜¶æ®µè¿›è¡Œçº¦æŸï¼Œé™åˆ¶æ¨¡å‹çš„è¾“å‡ºï¼Œ
Prompt Engineeringï¼š æœ€ç®€å•çš„åŠæ³•ï¼Œä½†ä¸ç¨³å®šã€‚
å¤šé˜¶æ®µpromptingï¼š é€šè¿‡å¤šä¸ªæ­¥éª¤çš„æç¤ºé€æ­¥å¼•å¯¼æ¨¡å‹ç”Ÿæˆæ‰€éœ€çš„æ ¼å¼ã€‚
æœ¬æ–‡å°†èšç„¦åœ¨Structured Outputsï¼Œ å—é™ç¼–ç ï¼Œ å’Œprompt-engineeringçš„è§’åº¦ï¼Œæ¢è®¨å®ƒä»¬åœ¨ç”Ÿæˆç‰¹å®šæ ¼å¼æ–‡æœ¬ä¸­çš„åº”ç”¨å’Œæ•ˆæœã€‚
Json Mode ä»…ç‰¹å®šæ¨¡å‹å’Œå¹³å°æ”¯æŒ
ä»¥openAI ä¸ºä¾‹ï¼Œ åœ¨openai.chat.completions.create å‚æ•°ä¸­å¢åŠ response_format={&#34;type&#34;:&#34;json_object&#34;} å³å¯ï¼ˆå…·ä½“å‚è§ï¼šresponse_format ï¼‰ã€‚
éœ€è¦åœ¨promptä¸­è¦æ±‚è¾“å‡ºjsonæ ¼å¼
ä¸èƒ½ä¿è¯å®Œå…¨æŒ‰è¦æ±‚çš„æ ¼å¼ç»“æ„è¾“å‡º
ä½†é100%æˆåŠŸç‡ï¼Œå­˜åœ¨ä¸€äº›éœ€è¦é¢å¤–æ£€æµ‹å’Œé€‚å½“å¤„ç†çš„edge caseã€‚
Handling edge cases æ ¹æ®OpenAIå®˜æ–¹æ–‡æ¡£æä¾›çš„å¤„ç†æ–¹æ¡ˆ https://platform.openai.com/docs/guides/structured-outputs/json-mode we_did_not_specify_stop_tokens = True try: response = client.chat.completions.create( model=&#34;gpt-3.5-turbo-0125&#34;, messages=[ {&#34;role&#34;: &#34;system&#34;, &#34;content&#34;: &#34;You are a helpful assistant designed to output JSON.&#34;}, {&#34;role&#34;: &#34;user&#34;, &#34;content&#34;: &#34;Who won the world series in 2020? Please respond in the format {winner: ...}&#34;} ], response_format={&#34;type&#34;: &#34;json_object&#34;} ) # Check if the conversation was too long for the context window, resulting in incomplete JSON if response.choices[0].message.finish_reason == &#34;length&#34;: # your code should handle this error case pass # Check if the OpenAI safety system refused the request and generated a refusal instead if response.choices[0].message[0].get(&#34;refusal&#34;): # your code should handle this error case # In this case, the .content field will contain the explanation (if any) that the model generated for why it is refusing print(response.choices[0].message[0][&#34;refusal&#34;]) # Check if the model&#39;s output included restricted content, so the generation of JSON was halted and may be partial if response.choices[0].message.finish_reason == &#34;content_filter&#34;: # your code should handle this error case pass if response.choices[0].message.finish_reason == &#34;stop&#34;: # In this case the model has either successfully finished generating the JSON object according to your schema, or the model generated one of the tokens you provided as a &#34;stop token&#34; if we_did_not_specify_stop_tokens: # If you didn&#39;t specify any stop tokens, then the generation is complete and the content key will contain the serialized JSON object # This is guaranteed to parse successfully and should now contain &#34;{&#34;winner&#34;: &#34;Los Angeles Dodgers&#34;}&#34; print(response.choices[0].message.content) else: # Check if the response.choices[0].message.content ends with one of your stop tokens and handle appropriately pass except Exception as e: # Your code should handle errors here, for example a network error calling the API print(e) ä½¿ç”¨pydanticçš„æ–¹æ¡ˆ ä½¿ç”¨pydanticçš„æ–¹æ¡ˆ from pydantic import BaseModel, EmailStr, ValidationError # å®šä¹‰ä½ æœŸæœ›çš„ JSON æ•°æ®æ¨¡å‹ class UserModel(BaseModel): name: str age: int email: EmailStr # æ£€æŸ¥ JSON æ˜¯å¦ç¬¦åˆæ¨¡å‹çš„å‡½æ•° def validate_json(json_str): try: # å°†è¾“å…¥çš„ JSON å­—ç¬¦ä¸²è½¬æ¢ä¸º UserModel å®ä¾‹ user = UserModel.parse_raw(json_str) # å¦‚æœéªŒè¯é€šè¿‡ï¼Œè¿”å›å­—å…¸ return user.dict() except ValidationError as ve: print(f&#34;JSON validation error: {ve.json()}&#34;) return None # ç¤ºä¾‹ç”¨æ³• json_str = &#39;{&#34;name&#34;: &#34;John Doe&#34;, &#34;email&#34;: &#34;john.doe@example.com&#34;}&#39; validated_json = validate_json(json_str) if validated_json is not None: print(&#34;JSON is valid and conforms to the schema:&#34;) print(validated_json) else: print(&#34;JSON is invalid.&#34;) Json-Mode æ›´å¤šæ˜¯å¯¹äºè¾“å‡ºjsonçš„æ ¼å¼è¿›è¡Œæ£€æŸ¥(å³Jsonæ ¼å¼çš„æœ‰æ•ˆæ€§)
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-08-21 14:49:00 +0800 CST'>August 21, 2024</span>&nbsp;Â·&nbsp;11 min&nbsp;Â·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to LLM è¾“å‡ºé™åˆ¶ï¼šStructured Outputsã€å—é™ç¼–ç å’Œæç¤ºè¯å·¥ç¨‹" href="https://niraya666.github.io/posts/llm-%E8%BE%93%E5%87%BA%E9%99%90%E5%88%B6structured-outputs%E5%8F%97%E9%99%90%E7%BC%96%E7%A0%81%E5%92%8C%E6%8F%90%E7%A4%BA%E8%AF%8D%E5%B7%A5%E7%A8%8B/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">RAGå·¥å…·ç®±ï¼šæ£€ç´¢
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h2>
  </header>
  <div class="entry-content">
    <p> If you want to make a good RAG tool that uses your documentation, you should start by making a search engine over those documents that would be good enough for a human to use themselves. This is likely something your organization has considered before, and if it doesnâ€™t exist itâ€™s because building a good search engine has traditionally been a significant undertaking.
â€” from Build a search engine, not a vector DB
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-07-25 17:08:00 +0800 CST'>July 25, 2024</span>&nbsp;Â·&nbsp;6 min&nbsp;Â·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to RAGå·¥å…·ç®±ï¼šæ£€ç´¢" href="https://niraya666.github.io/posts/rag%E6%A3%80%E7%B4%A2/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Agentå­¦ä¹ ç¬”è®°ï¼š å¦‚ä½•éªŒè¯æ¨¡å‹çš„tool-usingèƒ½åŠ›
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h2>
  </header>
  <div class="entry-content">
    <p>æœ¬æ–‡å°†ç®€å•ä»‹ç»å¦‚ä½•è¯„ä»·LLMçš„tool-using èƒ½åŠ›ã€‚
å¼•è¨€ åœ¨å·¥å…·ä½¿ç”¨è¯„ä¼°æ–¹é¢ï¼Œè¿‡å»çš„ç ”ç©¶ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æ€è·¯ï¼š
å¯¹æ¯”å·¥å…·ä½¿ç”¨å’Œçº¯LLMåœ¨åŸºå‡†æµ‹è¯•ä¸Šçš„åˆ†æ•°ï¼šä¾‹å¦‚Toolformerå’ŒLATMã€‚
åœ¨Toolformerç ”ç©¶ä¸­ï¼Œé€šè¿‡ä¸‹æ¸¸ä»»åŠ¡å¦‚è¯­è¨€æ¨¡å‹è¯„ä¼°åŸºå‡†æµ‹è¯•ã€æ•°å­¦æ¨ç†ä»»åŠ¡å’Œé—®ç­”ä»»åŠ¡æ¥éªŒè¯å·¥å…·ä½¿ç”¨çš„æœ‰æ•ˆæ€§ã€‚
LATMåˆ™é‡‡ç”¨äº†æ¥è‡ªBigBenchçš„å…­ä¸ªæ•°æ®é›†è¿›è¡Œè¯„ä¼°ã€‚
æµ‹è¯•å·¥å…·ä½¿ç”¨çš„å‡†ç¡®ç‡å’Œå“åº”è´¨é‡ï¼šä¾‹å¦‚API-Bankã€‚
åœ¨è¯„ä¼°è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆåˆå§‹åŒ–è¯„ä¼°ç³»ç»Ÿï¼Œç¡®ä¿æ¯ä¸ªAPIçš„æ•°æ®åº“åŒ…å«é»˜è®¤å€¼ã€‚ç„¶åï¼Œå°†é¢„æµ‹çš„APIè°ƒç”¨ä¸æ‰‹åŠ¨æ ‡æ³¨çš„APIè°ƒç”¨è¿›è¡Œæ¯”è¾ƒï¼Œä»¥ç¡®å®šå®ƒä»¬çš„ä¸€è‡´æ€§ã€‚å“åº”è¯„ä¼°åˆ™ä½¿ç”¨ROUGE-LæŒ‡æ ‡ã€‚ åˆ©ç”¨LLMå¯¹å·¥å…·ä½¿ç”¨çš„æ•ˆæœè¿›è¡Œè¯„ä»·ï¼šä¾‹å¦‚Tool-benchã€‚
two evaluation metrics:
Pass Rate: Calculates the proportion of successfully completing an instruction within limited OpenAI API calls.
Preference: Measured by comparing two answers (action sequences) for a given instruction.We pre-define a set of criteria for a better answer, which are organized as prompts for ChatGPT.
æ„é€ è™šæ‹Ÿè¿è¡Œç¯å¢ƒï¼Œæµ‹è¯•ä»£ç†ä¸ç¯å¢ƒçš„äº¤äº’ç»“æœï¼šä¾‹å¦‚ToolAlpacaã€‚
åˆ©ç”¨LLMæ¨¡æ‹Ÿç¯å¢ƒï¼ˆç”¨æˆ·ä»£ç†å’ŒåŠ©æ‰‹ä»£ç†ï¼‰ï¼Œå¹¶ä½¿ç”¨GPT-4å¯¹ToolAlpacaæ¨¡å‹è¿›è¡Œæœºå™¨è¯„ä¼°ï¼Œè¯„ä¼°å…¶ä½¿ç”¨å„ç§æœªè§å·¥å…·çš„èƒ½åŠ›ã€‚ å¯¹äºç»å¤§å¤šæ•°ä¼ä¸šå’Œå‚ç›´åœºæ™¯ä¸‹ï¼Œ å…¶ä¸­æ€è·¯1éœ€è¦æ„å»ºé¢å¤–çš„æµ‹è¯•é›†æˆæœ¬æ¯”è¾ƒé«˜ï¼ˆä½†è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼‰ï¼Œ è€Œæ€è·¯4æ„é€ è™šæ‹Ÿè¿è¡Œç¯å¢ƒå®é™…ä¸Šå¹¶ä¸ç°å®ï¼› æ‰€ä»¥è¿˜æ˜¯é€‰æ‹©æ€è·¯2ï¼Œå¤–åŠ é€šè¿‡æ€è·¯3è¾…åŠ©åˆ¤æ–­ï¼›æ¢å¥è¯è¯´ï¼Œ æ ¹æ®åœºæ™¯ï¼Œæ„é€ å·¥å…·åˆ—è¡¨å’Œå·¥å…·è°ƒç”¨çš„ground-truthï¼ˆåŒ…æ‹¬å‡½æ•°åï¼Œ å’Œä¼ å…¥å‚æ•°ï¼‰ ï¼Œåœ¨å­˜åœ¨æ­§ä¹‰æ—¶ï¼Œé‡‡ç”¨ROUGEè¯„ä»·å“åº”è´¨é‡ï¼Œ æˆ–è€…ä½¿ç”¨LLMåˆ¤æ–­å“åº”ç»“æœå¹¶è¯„ä»·ã€‚
é¡ºå¸¦æä¸€ä¸‹Langchain é¡¹ç›®ä¸­æœ‰å…³Agentçš„tool-usingèƒ½åŠ›æµ‹è¯•çš„å†…å®¹ï¼Œ ä¸è¿‡ç”±äºLangchainé¡¹ç›®åˆè‡­åˆé•¿ï¼Œä¸”æœ‰å¾ˆå¤§çš„å±€é™æ€§ï¼Œ è¿™é‡Œåªè®¨è®ºå…¶æ€è·¯ã€‚
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-06-25 17:00:00 +0800 CST'>June 25, 2024</span>&nbsp;Â·&nbsp;10 min&nbsp;Â·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to Agentå­¦ä¹ ç¬”è®°ï¼š å¦‚ä½•éªŒè¯æ¨¡å‹çš„tool-usingèƒ½åŠ›" href="https://niraya666.github.io/posts/agent%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%A6%82%E4%BD%95%E9%AA%8C%E8%AF%81%E6%A8%A1%E5%9E%8B%E7%9A%84tool-using%E8%83%BD%E5%8A%9B/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">RAGå·¥å…·ç®±ï¼šæ–‡æœ¬åˆ†å—
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h2>
  </header>
  <div class="entry-content">
    <p>ä¸ºä»€ä¹ˆè¦è¿›è¡Œæ–‡æœ¬åˆ†å—ï¼Ÿ å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å’ŒåµŒå…¥å¼æ¨¡å‹éƒ½æœ‰å…¶å¤„ç†æ–‡æœ¬çš„é•¿åº¦é™åˆ¶ã€‚ä¸ºäº†æœ‰æ•ˆå¤„ç†è¶…å‡ºè¿™äº›é™åˆ¶çš„é•¿æ–‡æœ¬ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œæ–‡æœ¬åˆ†å—ã€‚
å¦‚ä½•è¿›è¡Œæ–‡æœ¬åˆ†å— **å—åˆ†å‰²æˆ’å¾‹ï¼š**æˆ‘ä»¬çš„ç›®æ ‡ä¸ä»…ä»…æ˜¯ä¸ºäº†åˆ’åˆ†æ•°æ®å—ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬è¦ä»¥ä¸€ç§ä¾¿äºæ—¥åæ£€ç´¢å’Œæå–ä»·å€¼çš„æ ¼å¼æ¥æ•´ç†æˆ‘ä»¬çš„æ•°æ®ã€‚
æ–‡æœ¬åˆ†å—çš„æ ¹æœ¬ç›®çš„ä¸ä»…ä»…æ˜¯ç®€å•åœ°å°†æ•°æ®åˆ†å‰²æˆå—ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬è¦ä»¥ä¾¿äºæ£€ç´¢å’Œæå–ä»·å€¼çš„æ–¹å¼æ¥ç»„ç»‡è¿™äº›æ•°æ®å—ã€‚ä»¥ä¸‹æ˜¯å‡ ç§å¸¸è§çš„åˆ†å—é€»è¾‘ï¼š
å¥å­åˆ†å‰²ï¼ˆSentence Splittingï¼‰ è¿™ç§æ–¹æ³•åªæ˜¯ç®€å•åœ°å°†æ–‡æœ¬åˆ‡åˆ†æˆNä¸ªå­—ç¬¦çš„ç‰‡æ®µï¼Œä¸è€ƒè™‘å†…å®¹æˆ–å½¢å¼çš„è¿è´¯æ€§ã€‚
text = &#34;...&#34; # ä½ çš„æ–‡æœ¬ from langchain.text_splitter import CharacterTextSplitter text_splitter = CharacterTextSplitter( separator = &#34;\n\n&#34;, chunk_size = 256, chunk_overlap = 20 ) docs = text_splitter.create_documents([text]) é€’å½’å­—ç¬¦æ–‡æœ¬åˆ†å‰²ï¼ˆRecursive Character Text Splittingï¼‰ è¿™ç§æ–¹æ³•é¦–å…ˆå°è¯•ç”¨ä¸€ä¸ªåˆ†éš”ç¬¦å°†æ–‡æœ¬åˆ‡åˆ†æˆå°å—ã€‚å¦‚æœåˆå§‹å°è¯•æœªèƒ½è¾¾åˆ°é¢„æœŸçš„å—å¤§å°æˆ–ç»“æ„ï¼Œå°±é€’å½’åœ°ç”¨ä¸åŒçš„åˆ†éš”ç¬¦é‡æ–°åˆ†å‰²ç»“æœå—ï¼Œç›´åˆ°å¾—åˆ°æ»¡æ„çš„ç»“æœã€‚
text = &#34;...&#34; # ä½ çš„æ–‡æœ¬ from langchain.text_splitter import RecursiveCharacterTextSplitter text_splitter = RecursiveCharacterTextSplitter( chunk_size = 256, chunk_overlap = 20 ) docs = text_splitter.create_documents([text]) æ ¹æ®langchain çš„é»˜è®¤åˆ†éš”æ¡ä»¶ [&#34;\n\n&#34;, &#34;\n&#34;, &#34; &#34;, &#34;&#34;] ,ä¹Ÿå°±æ˜¯ä¼šå°†textæ ¹æ®è¯¥åˆ†å‰²æ¡ä»¶çš„é¡ºåºï¼ˆä¸¤ä¸ªæ¢è¡Œ-&gt;ä¸€ä¸ªæ¢è¡Œ-&gt;ç©ºæ ¼ï¼‰å°†æ–‡æœ¬è¿›è¡Œé€’å½’åˆ†å‰²ã€‚
é’ˆå¯¹ç‰¹å®šæ–‡æ¡£çš„åˆ†å‰²æ–¹æ³•ï¼ˆDocument Specific Splittingï¼‰ ä¾‹å¦‚é’ˆå¯¹Markdownæˆ–Pythonä»£ç çš„åˆ†å‰²ç­–ç•¥ï¼Œè¿™äº›ç­–ç•¥æ ¹æ®æ–‡æ¡£çš„ç»“æ„æ¥è¿›è¡Œåˆ†å‰²ï¼Œå¦‚ç±»å®šä¹‰æˆ–Markdownæ ‡é¢˜ã€‚
langchain æä¾›äº†ä¸€äº›å¸¸è§æ–‡æ¡£çš„åˆ†å‰²æ–¹æ³•ï¼š
mardownçš„åˆ†å‰²é€»è¾‘
[ # First, try to split along Markdown headings (starting with level 2) &#34;\n#{1,6} &#34;, # Note the alternative syntax for headings (below) is not handled here # Heading level 2 # --------------- # End of code block &#34;```\n&#34;, # Horizontal lines &#34;\n\\*\\*\\*&#43;\n&#34;, &#34;\n---&#43;\n&#34;, &#34;\n___&#43;\n&#34;, # Note that this splitter doesn&#39;t handle horizontal lines defined # by *three or more* of ***, ---, or ___, but this is not handled &#34;\n\n&#34;, &#34;\n&#34;, &#34; &#34;, &#34;&#34;, ] pythonçš„åˆ†å‰²é€»è¾‘ï¼š
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-05-15 16:11:00 +0800 CST'>May 15, 2024</span>&nbsp;Â·&nbsp;4 min&nbsp;Â·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to RAGå·¥å…·ç®±ï¼šæ–‡æœ¬åˆ†å—" href="https://niraya666.github.io/posts/rag%E5%B7%A5%E5%85%B7%E7%AE%B1%E6%96%87%E6%9C%AC%E5%88%86%E5%9D%97/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„ Agentï¼šç§‘æ™®å‘
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h2>
  </header>
  <div class="entry-content">
    <p>å†™åœ¨å¼€å¤´ æœ¬æ–‡æ˜¯åŸºäºæœ€è¿‘ç»„å†…æŠ€æœ¯äº¤æµçš„æ–‡å­—ç¨¿æ•´ç†ã€‚
What is Agentï¼Ÿ åœ¨æ¢è®¨å¤æ‚çš„äººå·¥æ™ºèƒ½æŠ€æœ¯ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹ç”Ÿæ´»ä¸­çš„ä¸€ä¸ªç®€å•ä¾‹å­ï¼šæ‰«åœ°æœºå™¨äººã€‚è¿™ç§æ™ºèƒ½è®¾å¤‡åœ¨æˆ¿é—´ä¸­è‡ªä¸»å¯¼èˆªï¼Œé¿å¼€éšœç¢ç‰©ï¼Œå¯»æ‰¾æœ€æœ‰æ•ˆçš„æ¸…æ´è·¯å¾„ã€‚å®ƒå°±æ˜¯ä¸€ä¸ªç°å®ç”Ÿæ´»ä¸­çš„Agentâ€”â€”ä¸€ä¸ªå¯ä»¥è‡ªä¸»å†³ç­–å’Œè¡ŒåŠ¨çš„å®ä½“ã€‚
åœ¨äººå·¥æ™ºèƒ½é¢†åŸŸï¼ŒAgentæŒ‡çš„æ˜¯ä»»ä½•å¯ä»¥æ„ŸçŸ¥å…¶ç¯å¢ƒå¹¶æ ¹æ®æ„ŸçŸ¥ç»“æœåšå‡ºå†³ç­–çš„å®ä½“ã€‚è¿™äº›å†³ç­–æ—¨åœ¨å®ŒæˆæŸäº›ä»»åŠ¡æˆ–è¾¾æˆç‰¹å®šçš„ç›®æ ‡ã€‚Agentçš„è¡Œä¸ºå¯ä»¥ç®€å•å¦‚æ¸¸æˆé‡Œçš„æœºå™¨äººï¼Œä¹Ÿå¯ä»¥å¤æ‚å¦‚è‡ªåŠ¨é©¾é©¶æ±½è½¦ã€‚
å¼€å§‹äºå¼ºåŒ–å­¦ä¹  åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œ æˆ‘ä»¬å¾€å¾€èƒ½è§åˆ°agentçš„æ¦‚å¿µã€‚å¼ºåŒ–å­¦ä¹ æ˜¯ä¸€ç§æœºå™¨å­¦ä¹ æ–¹æ³•ï¼Œå®ƒæ•™å¯¼Agenté€šè¿‡è¯•é”™æ³•æ‰¾åˆ°æœ€ä½³è¡ŒåŠ¨è·¯å¾„ã€‚å°±åƒè®­ç»ƒå°ç‹—ä¸€æ ·ï¼Œæˆ‘ä»¬é€šè¿‡å¥–åŠ±æ¥å¼•å¯¼Agentåšå‡ºæ­£ç¡®çš„å†³ç­–ã€‚Agentçš„ç›®æ ‡æ˜¯åœ¨ä¸ç¯å¢ƒçš„äº¤äº’ä¸­å¯»æ‰¾æœ€ä¼˜ç­–ç•¥ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œå¦‚æœAgentèƒ½å¤Ÿè·å–è¶³å¤Ÿå¤šçš„çœŸå®ç¯å¢ƒæ•°æ®ï¼Œå®ƒå°±èƒ½æ‰¾åˆ°æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚ç„¶è€Œï¼Œç”±äºçœŸå®ç¯å¢ƒçš„å¤æ‚æ€§ï¼Œå®Œå…¨æ¨¡æ‹ŸçœŸå®ä¸–ç•Œæ˜¯ä¸ç°å®çš„ã€‚
ç›®å‰ï¼Œå¼ºåŒ–å­¦ä¹ ä¸»è¦é€‚ç”¨äºç¯å¢ƒç®€å•ã€é—®é¢˜å®šä¹‰æ˜ç¡®çš„åœºæ™¯ï¼Œå¦‚å›´æ£‹æˆ–è§†é¢‘æ¸¸æˆã€‚è¿™ç§æ–¹æ³•åœ¨è™šæ‹Ÿç¯å¢ƒä¸­é€šè¿‡å¤§é‡è¯•é”™æ¥æ¢ç´¢è§£å†³æ–¹æ¡ˆï¼Œè¿™ç§æ–¹æ³•è™½ç„¶æœ‰æ•ˆï¼Œä½†ç¼ºä¹çµæ´»æ€§å’Œé«˜æ•ˆæ€§ã€‚ä¸äººç±»å­¦ä¹ æ–°æŠ€èƒ½çš„æ–¹å¼ç›¸æ¯”ï¼Œå¼ºåŒ–å­¦ä¹ çš„æ•ˆç‡è¿œä½ã€‚äººä»¬é€šå¸¸é€šè¿‡å°‘é‡çš„å°è¯•å°±èƒ½è¿…é€ŸæŒæ¡æ–°æŠ€èƒ½ï¼Œè€Œå¼ºåŒ–å­¦ä¹ å¯èƒ½éœ€è¦æˆåƒä¸Šä¸‡æ¬¡çš„è¯•é”™ã€‚
è¿™æ—¶å€™ï¼Œå¦‚æœagentå…·æœ‰å¤§è„‘å°±å¥½äº†ã€‚
å°†LLMsä½œä¸ºå¤§è„‘: èµ‹èƒ½æ™ºèƒ½Agentçš„å…³é”®æŠ€æœ¯ ç›¸è¾ƒäºåŸºäºå¼ºåŒ–å­¦ä¹ çš„Agentï¼Œäººç±»çš„ä¼˜åŠ¿åœ¨äºæˆ‘ä»¬å¤©ç”Ÿå…·å¤‡çš„è®°å¿†èƒ½åŠ›å’Œé€»è¾‘åˆ¤æ–­èƒ½åŠ›ï¼Œç”šè‡³åŒ…æ‹¬åæ€å’Œä»ç»éªŒä¸­å­¦ä¹ çš„èƒ½åŠ›ã€‚è¿™äº›èƒ½åŠ›ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡æå°‘çš„è¯•é”™è¿…é€Ÿé€‚åº”å’ŒæŒæ¡æ–°æŠ€èƒ½ã€‚
è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰ä¸ºAIé¢†åŸŸå¸¦æ¥äº†é©å‘½æ€§çš„å˜åŒ–ã€‚LLMsé€šè¿‡å…¶æ·±åº¦å­¦ä¹ çš„æ–°èŒƒå¼ï¼Œä»¥åŠåœ¨æ€ç»´é“¾å’Œè‡ªç„¶è¯­è¨€ç†è§£æ–¹é¢çš„å¼ºå¤§èƒ½åŠ›ï¼Œé¢„ç¤ºç€Agentå°†æ‹¥æœ‰æ›´å¼ºå¤§çš„å­¦ä¹ å’Œè¿ç§»èƒ½åŠ›ã€‚è¿™ç§èƒ½åŠ›çš„æå‡å°†ä½¿å¾—åˆ›å»ºå¹¿æ³›åº”ç”¨ä¸”å®ç”¨çš„Agentæˆä¸ºå¯èƒ½ã€‚
è™½ç„¶LLMæ˜¯å¦çœŸæ­£å…·å¤‡äº†æ¨ç†èƒ½åŠ›ä»ç„¶å­˜ç–‘ï¼Œä½†LLMçš„å‡ºç°æ— ç–‘æ”¹å˜äº†å¾ˆå¤šã€‚ä»¥COTï¼ˆChain of Thoughtï¼‰ä¸ºä¾‹ï¼Œè¿™ç§æ¨¡å‹é€šè¿‡æ‰“å°è§£é¢˜çš„ä¸­é—´æ­¥éª¤ï¼ŒåŠ å¼ºäº†åœ¨æ•°å­¦å’Œé€»è¾‘æ¨ç†æ–¹é¢çš„èƒ½åŠ›ï¼Œå‡å°‘äº†å¹»è§‰çš„å‡ºç°ã€‚è¿™ä¸€çªç ´æ€§çš„å·¥ä½œæ­ç¤ºäº†LLMåœ¨ä¸åŒåœºæ™¯ä¸‹çš„å¼ºå¤§&#34;in-context learning&#34;èƒ½åŠ›ï¼Œä»¥åŠå…¶åœ¨æœªç»å¾®è°ƒçš„æƒ…å†µä¸‹çš„æ³›åŒ–èƒ½åŠ›ã€‚
å°†LLMè§†ä¸ºAI Agentçš„å¤§è„‘ï¼Œä¸ºè‡ªåŠ¨åŒ–ç³»ç»Ÿæä¾›äº†ä¸€ç§å…¨æ–°çš„æ„æ€æ–¹å¼ã€‚è¿™ç§åŸºäºLLMçš„agentç³»ç»Ÿç»¼åˆäº†è§„åˆ’ã€è®°å¿†ã€å·¥å…·ä½¿ç”¨å’Œè¡ŒåŠ¨çš„èƒ½åŠ›ï¼Œé€šè¿‡APIè°ƒç”¨ä¸å¤–éƒ¨ä¸–ç•Œäº’åŠ¨ï¼Œæ˜¾ç¤ºå‡ºäº†å‰æ‰€æœªæœ‰çš„çµæ´»æ€§å’Œæ•ˆç‡ã€‚
æ ¹æ®LLM Powered Autonomous Agentsä¸€æ–‡å¯¹LLM-based agentç³»ç»Ÿçš„å®šä¹‰ï¼Œ agentéœ€è¦å…·å¤‡çš„åŸºæœ¬èƒ½åŠ›ï¼šè§„åˆ’&#43;è®°å¿†&#43;å·¥å…·&#43;è¡ŒåŠ¨ã€‚
è§„åˆ’èƒ½åŠ›ï¼šå°†å¤æ‚çš„ä»»åŠ¡åˆ†è§£æˆå°ä»»åŠ¡ï¼Œ å¹¶ç®¡ç†æ¯ä¸€ä¸ªå­ä»»åŠ¡çš„ç›®æ ‡ï¼Œ å¹¶ä»è¿‡å»çš„å¤±è´¥ä¸­åæ€ï¼Œä»¥å¸å–ç»éªŒã€‚
è®°å¿†ï¼šLLMçš„ä¸Šä¸‹æ–‡é•¿åº¦æœ‰é™ï¼Œ é€šè¿‡é¢å¤–çš„è®°å¿†ç³»ç»Ÿä»¥æå‡LLMä½œä¸ºå¤§è„‘çš„èƒ½åŠ›ã€‚
å·¥å…·è°ƒç”¨&amp;è¡ŒåŠ¨ï¼šLLMé€šè¿‡APIè°ƒç”¨çš„æ–¹å¼ï¼Œæ‰§è¡Œä»»åŠ¡ï¼Œ ä¸å¤–ç•Œäº¤äº’ï¼Œè€Œä¸æ˜¯åªæ˜¯è¾“å‡ºæ–‡å­—ã€‚
æ¢ç´¢AIä»£ç†çš„ç‹¬ç‰¹èƒ½åŠ›ï¼šäººç±»ä¸å•ä¸€LLMæ— æ³•æ¯”æ‹Ÿ AIç³»ç»Ÿçš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå®ƒä»¬çš„è§„æ¨¡å’Œæ•ˆç‡ã€‚è¿™äº›ç³»ç»Ÿèƒ½å¤Ÿæ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼Œè¶…è¶Šäººç±»èƒ½åŠ›ï¼š
å¤§è§„æ¨¡æ•°æ®å¤„ç†ï¼šAIèƒ½å¤Ÿé«˜æ•ˆåœ°åˆ†æå’Œå¤„ç†è¶…å‡ºäººç±»ç†è§£èŒƒå›´çš„æ•°æ®é‡ã€‚
æ— éœ€ä¼‘æ¯çš„æŒç»­æ“ä½œï¼šAIç³»ç»Ÿå¯ä»¥ä¸é—´æ–­åœ°è¿è¡Œï¼Œè€Œæ— éœ€åƒäººç±»é‚£æ ·ä¼‘æ¯å’Œæ¢å¤ã€‚
è¶…å¿«é€Ÿè®¡ç®—ï¼šAIå¯ä»¥è¿…é€Ÿæ‰§è¡Œå¤æ‚çš„è®¡ç®—ï¼Œå¤„ç†é€Ÿåº¦å’Œæ•ˆç‡è¿œè¶…äººç±»ã€‚
AIä»£ç†ä¸å•ä¸€LLMçš„ä¸åŒ:
æ ¹æ®Andrew Ngåœ¨è®²åº§ä¸­åˆ†äº«çš„å†…å®¹ï¼Œä½¿ç”¨ç›¸å¯¹â€œç®€å•â€æ¨¡å‹çš„ä»£ç†å·¥ä½œæµç¨‹ï¼ˆä¾‹å¦‚GPT-3.5ï¼‰åœ¨å®é™…åº”ç”¨ä¸­å¾€å¾€èƒ½å¤Ÿè¶…è¶Šä½¿ç”¨â€œæ™ºèƒ½â€æ¨¡å‹ï¼ˆå¦‚GPT-4ï¼‰çš„é›¶æ¬¡æç¤ºã€‚è¿™è¯´æ˜åœ¨ç‰¹å®šåœºæ™¯ä¸‹ï¼Œé€‰æ‹©é€‚å½“çš„AIæ¨¡å‹å’Œç­–ç•¥å¯èƒ½æ¯”å•ä¸€çš„é«˜çº§æ¨¡å‹æ›´æœ‰æ•ˆã€‚
AIä»£ç†åœ¨å†³ç­–åˆ¶å®šä¸­çš„åº”ç”¨ä¹Ÿæ˜¾ç¤ºå‡ºå…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿ã€‚å®ƒä»¬å¯ä»¥åœ¨æ²¡æœ‰æƒ…æ„Ÿåè§çš„æƒ…å†µä¸‹ï¼ŒåŸºäºå¤§é‡æ•°æ®åšå‡ºå¿«é€Ÿä¸”ç²¾ç¡®çš„å†³ç­–ã€‚è¿™ç§èƒ½åŠ›åœ¨éœ€è¦å¿«é€Ÿå“åº”å’Œé«˜ç²¾ç¡®åº¦çš„é¢†åŸŸå°¤ä¸ºé‡è¦ï¼Œå¦‚é‡‘èäº¤æ˜“å’Œç´§æ€¥å“åº”ç³»ç»Ÿã€‚
Agentçš„è§„åˆ’å’Œæ€ç»´è¿‡ç¨‹ AI Agentåœ¨å¤„ç†å¤æ‚ä»»åŠ¡æ—¶ï¼Œé€šè¿‡å°†å¤§ä»»åŠ¡åˆ†è§£æˆå°ä»»åŠ¡æ¥æé«˜æ•ˆç‡ã€‚æ­¤å¤–ï¼Œè‡ªæˆ‘åæ€èƒ½åŠ›å…è®¸Agentä»è¿‡å»çš„è¡ŒåŠ¨ä¸­å­¦ä¹ ï¼Œé€šè¿‡è¯„ä¼°è¿‡å»çš„å†³ç­–æ¥æ”¹å–„æœªæ¥çš„è¡¨ç°ã€‚
CoTï¼ŒChain of Thoughtï¼Œ Wei et al. 2022ã€‚ å³â€œæ€ç»´é“¾â€ï¼Œæ˜¯ä¸€ç§ä½¿Agenté€æ­¥æ€è€ƒçš„æ–¹æ³•ã€‚å®ƒé€šè¿‡è¦æ±‚æ¨¡å‹å±•ç¤ºè§£å†³é—®é¢˜çš„ä¸­é—´æ­¥éª¤æ¥åŠ å¼ºå…¶é€»è¾‘æ¨ç†èƒ½åŠ›ï¼Œä»è€Œæé«˜å†³ç­–çš„è´¨é‡å’Œå‡†ç¡®æ€§ã€‚
Tree of Thoughtsï¼Œ ToT (Yao et al. 2023)
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-05-13 16:00:00 +0800 CST'>May 13, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„ Agentï¼šç§‘æ™®å‘" href="https://niraya666.github.io/posts/%E5%9F%BA%E4%BA%8E%E5%A4%A7%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E7%9A%84-agent%E7%A7%91%E6%99%AE%E5%90%91/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">Agentå­¦ä¹ ç¬”è®°ï¼šOpenAI Function Callingå®Œå…¨æŒ‡å—
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h2>
  </header>
  <div class="entry-content">
    <p>å†™åœ¨æœ€å¼€å§‹ å½“æˆ‘ä»¬åœ¨è®¨è®ºåŸºäºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLM-basedï¼‰çš„æ™ºèƒ½ä»£ç†ï¼ˆagentï¼‰æ—¶ï¼Œæˆ‘ä»¬ç©¶ç«Ÿåœ¨è°ˆè®ºä»€ä¹ˆï¼Ÿæ ¹æ®Lilian Wåœ¨å…¶æ–‡ç« ã€ŠLLM Powered Autonomous Agentsã€‹ä¸­çš„è®¨è®ºï¼Œä¸€ä¸ªæ™ºèƒ½ä»£ç†éœ€è¦å…·å¤‡å‡ ä¸ªæ ¸å¿ƒèƒ½åŠ›ï¼šè§„åˆ’ï¼ˆPlanningï¼‰ã€è®°å¿†ï¼ˆMemoryï¼‰ã€ä»¥åŠå·¥å…·ä½¿ç”¨ï¼ˆTool useï¼‰ã€‚ç‰¹åˆ«åœ°ï¼Œå·¥å…·ä½¿ç”¨æ–¹é¢çš„è¿›å±•ï¼Œå¾—ç›ŠäºOpenAIåœ¨APIä¸­æä¾›çš„function callingåŠŸèƒ½ï¼Œä¸ºæˆ‘ä»¬å¼€å¯äº†æ–°çš„å¯èƒ½æ€§ã€‚
OpenAI function callingï¼Œä½œä¸ºæ™ºèƒ½ä»£ç†ä¸å¤–éƒ¨å·¥å…·äº¤äº’çš„åŸºæœ¬æ–¹å¼ï¼Œå¯¹äºæ¯ä½ä»ä¸šè€…æ¥è¯´éƒ½æ˜¯å¿…å¤‡æŠ€èƒ½ã€‚éšç€æŠ€æœ¯çš„å‘å±•ï¼Œæˆ‘ä»¬æœŸæœ›çš„ä¸åªæ˜¯èƒ½ä¸æˆ‘ä»¬å¯¹è¯çš„LLMï¼Œè€Œæ˜¯èƒ½å¤Ÿè¾…åŠ©æˆ‘ä»¬ä½¿ç”¨å„ç§å·¥å…·ã€åšå‡ºå†³ç­–çš„æ™ºèƒ½ä¼™ä¼´ã€‚
ä¸è¿‡éœ€è¦ç‰¹åˆ«æŒ‡å‡ºçš„æ˜¯ï¼Œæœ€è¿‘OpenAIåœ¨Chat Completions APIä¸­å·²ç»åºŸå¼ƒäº†â€œå‡½æ•°ï¼ˆfunctionï¼‰â€çš„ä½¿ç”¨ï¼Œè½¬è€Œé‡‡ç”¨â€œå·¥å…·ï¼ˆtoolï¼‰â€ã€‚è¿™ä¸€å˜æ›´æ—¨åœ¨æ‹“å®½LLMé›†æˆçš„åŠŸèƒ½èŒƒå›´ï¼Œä¸ºæ›´å¤æ‚çš„äº¤äº’æ¨¡å¼é“ºå¹³é“è·¯ï¼Œå¦‚æ„å»ºèƒ½å¤Ÿç›¸äº’ä½œç”¨çš„å¤šä»£ç†ç³»ç»Ÿã€‚
å°½ç®¡å¦‚æ­¤ï¼Œç”±äºè¯­è¨€ä¹ æƒ¯çš„åŸå› ï¼Œæœ¬æ–‡ä¸­ä»ç„¶ä¼šä½¿ç”¨function callingçš„æœ¯è¯­æ¥æè¿°OpenAIçš„tool usingåŠŸèƒ½ï¼Œå› ä¸ºâ€œfunction callingâ€çš„è¯´æ³•å·²ç»æ·±å…¥äººå¿ƒäº†ã€‚
æ ¸å¿ƒå†…å®¹æ¦‚è§ˆ
Function Callingçš„å®šä¹‰ï¼šè§£é‡Šä»€ä¹ˆæ˜¯function callingï¼Œä»¥åŠå®ƒåœ¨æ™ºèƒ½ä»£ç†å·¥ä½œä¸­çš„ä½œç”¨ã€‚
OpenAI Cookbookç¤ºä¾‹ï¼šæä¾›å®é™…çš„function callingç¤ºä¾‹ï¼Œå¸®åŠ©è¯»è€…ç†è§£å…¶åœ¨å®é™…åº”ç”¨ä¸­çš„ç”¨é€”ã€‚
å¼€æºLLMçš„Tool Usingï¼šæ¢ç´¢å¦‚ä½•åœ¨å¼€æºå¤§å‹è¯­è¨€æ¨¡å‹ä¸­å®ç°å·¥å…·ä½¿ç”¨ï¼Œä»¥åŠLLMåœ¨tool usingçš„æ—¶å€™ç»å†äº†ä»€ä¹ˆã€‚
è¯„ä»·ä¸è®­ç»ƒï¼šè®¨è®ºå¦‚ä½•è¯„ä»·å¼€æºæ¨¡å‹çš„å·¥å…·ä½¿ç”¨èƒ½åŠ›ï¼Œä»¥åŠå¦‚ä½•è®­ç»ƒLLMè¿›è¡Œæœ‰æ•ˆçš„å·¥å…·ä½¿ç”¨ã€‚
é‰´äºæ•´ç†ç¬”è®°çš„é€Ÿåº¦è¿œèµ¶ä¸ä¸Šæ›´æ–°çš„é€Ÿåº¦ï¼Œ ä¼šå°†ç¬¬å››éƒ¨ä»½ä½œä¸ºå•ç‹¬çš„éƒ¨åˆ†æ•´ç†ã€‚
ä½•ä¸ºfunction calling ä¸€å¥è¯è§£é‡Šï¼šfunction callingä»æœ¬è´¨ä¸Šå¹¶ä¸æ˜¯ä¸¥æ ¼çš„å·¥å…·è°ƒç”¨ï¼Œ è€Œæ˜¯ä½œä¸ºå·¥å…·è°ƒç”¨çš„å‰å¥ï¼Œå®ƒé€šè¿‡æ›´åŠ ç»“æ„åŒ–çš„æ–¹å¼æŒ‡å¯¼LLMè¾“å‡ºï¼Œä¸ºåœ¨æœ¬åœ°æ‰§è¡Œå…·ä½“å‡½æ•°æä¾›äº†å‚æ•°ï¼Œé“ºå¹³äº†é“è·¯ã€‚
å…·ä½“æ¥è¯´ï¼Œfunction callingå…è®¸LLMåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­é€šè¿‡æŒ‡å®šçš„å‚æ•°æ¥è°ƒç”¨å¹¶æ‰§è¡Œä¸€ä¸ªç‰¹å®šçš„å‡½æ•°ã€‚è¿™ç§æ–¹å¼ä¸ä»…å®ç°äº†ä»£ç çš„é‡ç”¨å’Œæ¨¡å—åŒ–å¤„ç†ï¼Œè€Œä¸”èƒ½å¤Ÿä»æ¨¡å‹ä¸­è·å–æ›´å¯é çš„ç»“æ„åŒ–æ•°æ®å›åº”ã€‚åœ¨APIè°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œå¼€å‘è€…å¯ä»¥æè¿°æƒ³è¦æ‰§è¡Œçš„åŠŸèƒ½ï¼Œå¹¶è®©æ¨¡å‹æ™ºèƒ½åœ°é€‰æ‹©è¾“å‡ºåŒ…å«æ‰€éœ€å‚æ•°çš„JSONå¯¹è±¡ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒChat Completions APIæœ¬èº«ä¸ç›´æ¥æ‰§è¡Œä»»ä½•å‡½æ•°è°ƒç”¨ï¼Œè€Œæ˜¯ç”Ÿæˆäº†å¯ä»¥åœ¨å¼€å‘è€…ä»£ç ä¸­å®ç°å‡½æ•°è°ƒç”¨çš„JSONã€‚
function callingçš„åº”ç”¨èŒƒå›´å¹¿æ³›ï¼Œå¦‚
åˆ›å»ºæ™ºèƒ½åŠ©æ‰‹ï¼šé€šè¿‡è°ƒç”¨å¤–éƒ¨APIå›ç­”é—®é¢˜ã€‚
è½¬æ¢æŒ‡ä»¤ï¼šå°†è‡ªç„¶è¯­è¨€æŒ‡ä»¤è½¬æ¢æˆAPIè°ƒç”¨æŒ‡ä»¤ã€‚
æ•°æ®æå–ï¼šä»æ–‡æœ¬ä¸­æå–ç»“æ„åŒ–æ•°æ®ã€‚
function callingçš„è¿‡ç¨‹æ¶µç›–äº†ä»å®šä¹‰å‡½æ•°é›†ã€é€šè¿‡æ¨¡å‹ç”Ÿæˆéµå¾ªè‡ªå®šä¹‰æ¨¡å¼çš„JSONå¯¹è±¡å­—ç¬¦ä¸²ï¼Œåˆ°åœ¨ä»£ç ä¸­è§£æè¿™ä¸ªå­—ç¬¦ä¸²å¹¶è°ƒç”¨ç›¸åº”å‡½æ•°çš„å…¨è¿‡ç¨‹ã€‚è¿™ä¸€è¿ä¸²æ“ä½œä¸ä»…è‡ªåŠ¨åŒ–äº†äº¤äº’è¿‡ç¨‹ï¼Œè¿˜ç¡®ä¿äº†æ‰§è¡Œæ“ä½œçš„å®‰å…¨æ€§å’Œå‡†ç¡®æ€§ã€‚
ä¸€äº›å¸¸è§çš„é—®é¢˜ JSON mode json mode å’Œtool-using æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿæœ‰äº†json mode è¿˜éœ€è¦ç”¨åˆ°tool-usingå—ï¼Ÿ
ä»json mode çš„æœ¬è´¨ï¼Œ æ›´å¤šçš„æ˜¯åœ¨system prompt å¢åŠ ä¸€å¥ç±»ä¼¼â€œè¯·ä»¥jsonæ ¼å¼è¾“å‡ºâ€ä¹‹ç±»çš„è¯ï¼Œç„¶ååœ¨LLMè¾“å‡ºæ—¶å¢åŠ jsonç»“æœæ£€æŸ¥å’Œæ ¼å¼è½¬æ¢ã€‚åœ¨ä½¿ç”¨æ—¶åªéœ€è¦åœ¨client.chat.completions.create ä¸­ å¢åŠ response_format={ &#34;type&#34;: &#34;json_object&#34; } å³å¯ã€‚
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-04-28 15:00:00 +0800 CST'>April 28, 2024</span>&nbsp;Â·&nbsp;23 min&nbsp;Â·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to Agentå­¦ä¹ ç¬”è®°ï¼šOpenAI Function Callingå®Œå…¨æŒ‡å—" href="https://niraya666.github.io/posts/agent%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0openai-function-calling%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/"></a>
</article>

<article class="post-entry"> 
<figure class="entry-cover"><img loading="lazy" src="https://niraya666.github.io/img/post-cover/rag_toolkits_2.JPG" alt="RAGå·¥å…·ç®±ï¼šæ–‡æ¡£è§£æä¸è¡¨æ ¼å¤„ç†">
</figure>
  <header class="entry-header">
    <h2 class="entry-hint-parent">RAGå·¥å…·ç®±ï¼šæ–‡æ¡£è§£æä¸è¡¨æ ¼å¤„ç†
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h2>
  </header>
  <div class="entry-content">
    <p> å¼•è¨€ åœ¨ä¿¡æ¯åŒ–æ—¶ä»£ï¼Œæ•°æ®å’ŒçŸ¥è¯†çš„å¿«é€Ÿæå–å˜å¾—å°¤ä¸ºé‡è¦ã€‚ç‰¹åˆ«æ˜¯å¯¹äºå­¦æœ¯å’ŒæŠ€æœ¯æ–‡æ¡£ï¼Œå¦‚ä½•ä»æ ¼å¼ä¸°å¯Œä¸”ç»“æ„å¤æ‚çš„PDFæ–‡ä»¶ä¸­å‡†ç¡®åœ°æå–ä¿¡æ¯ï¼Œæ˜¯æé«˜ç ”ç©¶æ•ˆç‡çš„å…³é”®ã€‚æœ¬æ–‡å°†æ¢è®¨å‡ ç§å…ˆè¿›çš„æŠ€æœ¯æ–¹æ³•ï¼Œç”¨äºä¼˜åŒ–å­¦æœ¯è®ºæ–‡çš„PDFè§£æåŠå…¶è¡¨æ ¼å†…å®¹çš„å¤„ç†ã€‚
å¯¹äºæ–‡æ¡£è§£æï¼Œlangchain å’Œ llama_index æä¾›çš„ document loader èƒ½å¤Ÿæ”¯æŒå¤šç§æ–‡ä»¶ç±»å‹ï¼Œè¦†ç›–ç»å¤§å¤šæ•°æ–‡æ¡£æ ¼å¼çš„éœ€æ±‚ã€‚ä½†å¯¹äºpdfè§£æè€Œè¨€è¿˜å­˜åœ¨ç€ä¸€äº›æŒ‘æˆ˜ã€‚
äººç±»ä¸æœºå™¨çš„é˜…è¯»å·®å¼‚ å°½ç®¡PDFæ ¼å¼é€‚åˆäººç±»é˜…è¯»ï¼Œæä¾›äº†ä¼˜ç§€çš„è§†è§‰ä½“éªŒå’Œæ ¼å¼ä¿çœŸï¼Œä½†å®ƒå¹¶ä¸é€‚åˆæœºå™¨é˜…è¯»ã€‚PDFæ–‡ä»¶é€šå¸¸åŒ…å«å¤æ‚çš„å¸ƒå±€å’Œå¤šæ ·çš„å†…å®¹å…ƒç´ ï¼Œå¦‚å¤šåˆ—å¸ƒå±€ã€å…¬å¼å’Œè¡¨æ ¼ï¼Œè¿™äº›éƒ½ç»™è‡ªåŠ¨è§£æå¸¦æ¥äº†æŒ‘æˆ˜ã€‚
å¸¸è§çš„PDFè§£æé—®é¢˜ ä½¿ç”¨ä¼ ç»Ÿçš„PDFè§£æåº“å¯èƒ½é‡åˆ°å¤šç§é—®é¢˜ï¼š
å¤šåˆ—å¸ƒå±€å¯¼è‡´çš„æ–‡æœ¬æµè¯»å–é”™è¯¯ã€‚
å…¬å¼å’Œè¡¨æ ¼çš„è§£ææ•ˆæœå·®ï¼Œéš¾ä»¥æ­£ç¡®æå–ä¿¡æ¯ã€‚
è§£æè¿‡ç¨‹ä¸­ç»“æ„åŒ–ä¿¡æ¯ï¼ˆå¦‚æ ‡é¢˜å’Œåˆ—è¡¨ï¼‰çš„ä¸¢å¤±ã€‚
å½±å°ç‰ˆPDFçš„æ–‡æœ¬æ— æ³•è¢«æ ‡å‡†OCRå·¥å…·è¯†åˆ«ã€‚
é«˜çº§è§£ææŠ€æœ¯ æ ¹æ®unstractuedæä¾›çš„æ–¹æ¡ˆï¼Œæ–‡æ¡£è§£æå¯ä»¥å¤§è‡´åˆ†ä¸ºä¸¤ç§æ–¹æ³•ï¼šç»“æ„åŒ–è§£æå’ŒåŸºäºå›¾åƒçš„è§£æã€‚ç»“æ„åŒ–è§£æä¾§é‡äºä»æ–‡æ¡£ä¸­æå–æ–‡å­—å’Œå…¶å®ƒå­—ç¬¦æ•°æ®ã€‚è€Œå›¾åƒåŸºè§£æåˆ™åŒ…æ‹¬ä»¥ä¸‹ä¸¤ç§æŠ€æœ¯ï¼š
OCRæŠ€æœ¯ï¼šé¦–å…ˆä½¿ç”¨ç›®æ ‡æ£€æµ‹æ¨¡å‹å¯¹æ–‡æ¡£å¸ƒå±€è¿›è¡Œåˆ†æï¼Œè¯†åˆ«å‡ºæ ‡é¢˜ã€è¡¨æ ¼ç­‰å…³é”®å…ƒç´ çš„ä½ç½®ï¼Œç„¶ååœ¨è¿™äº›ä½ç½®ä¸Šä½¿ç”¨OCRæŠ€æœ¯æå–æ–‡å­—ã€‚
åŸºäºTransformerçš„ç«¯åˆ°ç«¯è§£æï¼šä½¿ç”¨æ·±åº¦å­¦ä¹ æ¨¡å‹ç›´æ¥å°†å›¾åƒè½¬æ¢ä¸ºç›¸åº”çš„æ–‡å­—å†…å®¹ã€‚åœ¨è¿™æ–¹é¢ï¼ŒDount å’Œ Nougat æ¨¡å‹è¡¨ç°å‡ºè‰²ï¼Œå°¤å…¶æ˜¯ Nougat èƒ½å¤Ÿå°†å›¾åƒä¸­çš„æ–‡ç« æ•´ç†æˆMarkdownæˆ–Latexæ ¼å¼ï¼Œéå¸¸é€‚åˆéœ€è¦ä¿ç•™ç»“æ„ä¿¡æ¯ï¼ˆå¦‚æ ‡é¢˜å±‚çº§ã€å…¬å¼å’Œè¡¨æ ¼ï¼‰çš„åœºæ™¯ã€‚
åªå¯æƒœNougatåªé’ˆå¯¹è‹±æ–‡çš„å­¦æœ¯è®ºæ–‡åšäº†è®­ç»ƒï¼Œä½†é‡åˆ°å…¶ä»–è¯­è¨€å¦‚ä¸­æ–‡è®ºæ–‡çš„æ•ˆæœå°±ä¸æ˜¯é‚£ä¹ˆçš„å¥½äº†ã€‚
å¿…é¡»å¼ºè°ƒä¸€ç‚¹çš„æ˜¯ï¼ŒMarkdownæ ¼å¼å› å…¶ç®€æ´æ€§å’Œæ˜“äºè§£æçš„ç‰¹ç‚¹ï¼Œè¢«å¹¿æ³›è®¤ä¸ºæ˜¯LLMï¼ˆå¤§å‹è¯­è¨€æ¨¡å‹ï¼‰å‹å¥½çš„æ–‡æ¡£æ ¼å¼ã€‚Markdowné€šè¿‡æ˜ç¡®çš„æ ‡è®°è¯­æ³•ï¼Œå¸®åŠ©æ¨¡å‹æ›´å¥½åœ°ç†è§£æ–‡æ¡£ç»“æ„å’Œå†…å®¹ï¼Œä»è€Œæé«˜ä¿¡æ¯æå–çš„å‡†ç¡®æ€§å’Œæ•ˆç‡ã€‚ç‰¹åˆ«åœ¨å­˜åœ¨å¤§é‡å…¬å¼ï¼Œè¡¨æ ¼çš„å­¦æœ¯è®ºæ–‡åœºæ™¯ä¸‹ï¼ŒMarkdownå¯èƒ½æ˜¯æ›´åˆé€‚çš„æ ¼å¼é€‰æ‹©ã€‚
å¿«é€Ÿä¸Šæ‰‹ï¼šä½¿ç”¨Nougatå°†pdfè§£ææˆé€‚åˆLLMè¯»å–çš„markdown ä¾èµ–æŒ‰ç…§
!pip install -q pymupdf python-Levenshtein nltk !pip install -q git&#43;https://github.com/huggingface/transformers.git Load model and processor
from transformers import AutoProcessor, VisionEncoderDecoderModel import torch processor = AutoProcessor.from_pretrained(&#34;facebook/nougat-base&#34;) model = VisionEncoderDecoderModel.from_pretrained(&#34;facebook/nougat-base&#34;) device = &#34;cuda&#34; if torch.cuda.is_available() else &#34;cpu&#34; model.to(device) å°†pdfè½¬æˆå›¾åƒ
from typing import Optional, List import io import fitz from pathlib import Path def rasterize_paper( pdf: Path, outpath: Optional[Path] = None, dpi: int = 96, return_pil=False, pages=None, ) -&gt; Optional[List[io.BytesIO]]: &#34;&#34;&#34; Rasterize a PDF file to PNG images. Args: pdf (Path): The path to the PDF file. outpath (Optional[Path], optional): The output directory. If None, the PIL images will be returned instead. Defaults to None. dpi (int, optional): The output DPI. Defaults to 96. return_pil (bool, optional): Whether to return the PIL images instead of writing them to disk. Defaults to False. pages (Optional[List[int]], optional): The pages to rasterize. If None, all pages will be rasterized. Defaults to None. Returns: Optional[List[io.BytesIO]]: The PIL images if `return_pil` is True, otherwise None. &#34;&#34;&#34; pillow_images = [] if outpath is None: return_pil = True try: if isinstance(pdf, (str, Path)): pdf = fitz.open(pdf) if pages is None: pages = range(len(pdf)) for i in pages: page_bytes: bytes = pdf[i].get_pixmap(dpi=dpi).pil_tobytes(format=&#34;PNG&#34;) if return_pil: pillow_images.append(io.BytesIO(page_bytes)) else: with (outpath / (&#34;%02d.png&#34; % (i &#43; 1))).open(&#34;wb&#34;) as f: f.write(page_bytes) except Exception: pass if return_pil: return pillow_images from transformers import StoppingCriteria, StoppingCriteriaList from collections import defaultdict class RunningVarTorch: def __init__(self, L=15, norm=False): self.values = None self.L = L self.norm = norm def push(self, x: torch.Tensor): assert x.dim() == 1 if self.values is None: self.values = x[:, None] elif self.values.shape[1] &lt; self.L: self.values = torch.cat((self.values, x[:, None]), 1) else: self.values = torch.cat((self.values[:, 1:], x[:, None]), 1) def variance(self): if self.values is None: return if self.norm: return torch.var(self.values, 1) / self.values.shape[1] else: return torch.var(self.values, 1) class StoppingCriteriaScores(StoppingCriteria): def __init__(self, threshold: float = 0.015, window_size: int = 200): super().__init__() self.threshold = threshold self.vars = RunningVarTorch(norm=True) self.varvars = RunningVarTorch(L=window_size) self.stop_inds = defaultdict(int) self.stopped = defaultdict(bool) self.size = 0 self.window_size = window_size @torch.no_grad() def __call__(self, input_ids: torch.LongTensor, scores: torch.FloatTensor): last_scores = scores[-1] self.vars.push(last_scores.max(1)[0].float().cpu()) self.varvars.push(self.vars.variance()) self.size &#43;= 1 if self.size &lt; self.window_size: return False varvar = self.varvars.variance() for b in range(len(last_scores)): if varvar[b] &lt; self.threshold: if self.stop_inds[b] &gt; 0 and not self.stopped[b]: self.stopped[b] = self.stop_inds[b] &gt;= self.size else: self.stop_inds[b] = int( min(max(self.size, 1) * 1.15 &#43; 150 &#43; self.window_size, 4095) ) else: self.stop_inds[b] = 0 self.stopped[b] = False return all(self.stopped.values()) and len(self.stopped) &gt; 0 å°†pdfè½¬æˆmarkdown
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-04-20 17:00:00 +0800 CST'>April 20, 2024</span>&nbsp;Â·&nbsp;3 min&nbsp;Â·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to RAGå·¥å…·ç®±ï¼šæ–‡æ¡£è§£æä¸è¡¨æ ¼å¤„ç†" href="https://niraya666.github.io/posts/rag%E5%B7%A5%E5%85%B7%E7%AE%B1%E6%96%87%E6%A1%A3%E8%A7%A3%E6%9E%90%E4%B8%8E%E8%A1%A8%E6%A0%BC%E5%A4%84%E7%90%86/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">RAGå·¥å…·ç®±ï¼šè¯„ä¼°RAGç³»ç»Ÿçš„æ–¹æ³•è®º
      <span class="entry-hint" title="Draft">
        <svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" fill="currentColor">
          <path
            d="M160-410v-60h300v60H160Zm0-165v-60h470v60H160Zm0-165v-60h470v60H160Zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22q0 11-4.5 22.5T862.09-380L643-160H520Zm300-263-37-37 37 37ZM580-220h38l121-122-18-19-19-18-122 121v38Zm141-141-19-18 37 37-18-19Z" />
        </svg>
      </span>
    </h2>
  </header>
  <div class="entry-content">
    <p>å†™åœ¨æœ€å‰é¢ åœ¨è¿‡å»çš„å‡ ä¸ªæœˆä¸­ï¼Œæˆ‘ä¸»è¦è‡´åŠ›äºä¸RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆæ¨¡å‹ï¼‰ç›¸å…³çš„ç ”ç©¶å’Œå®éªŒå·¥ä½œã€‚é€šè¿‡æ·±å…¥åœ°åˆ†æä¼—å¤šè®ºæ–‡å’Œé¡¹ç›®ä»£ç ï¼Œæˆ‘å‘ç°è™½ç„¶åœ¨RAGé¢†åŸŸå–å¾—åŸºæœ¬æˆå°±ç›¸å¯¹å®¹æ˜“ï¼Œä½†è¦å®ç°å‡ºè‰²çš„æˆæœå´å¼‚å¸¸å›°éš¾ã€‚
æ­¤ç³»åˆ—æ–‡ç« æ—¨åœ¨åˆ†äº«æˆ‘åœ¨RAGç ”ç©¶ä¸­çš„å¿ƒå¾—å’ŒæŒ‘æˆ˜ã€‚æ­£å¦‚æˆ‘ä»¬ä»OpenAIçš„å¼€å‘è€…æ—¥æ´»åŠ¨ä¸­çœ‹åˆ°çš„ï¼Œå³ä½¿æ˜¯åœ¨è¿™ä¸ªé¢†åŸŸçš„é¢†å¤´ç¾Šä¹Ÿåœ¨ä¸æ–­è¯•éªŒå’ŒåŠªåŠ›ä»¥å¯»æ±‚çªç ´ã€‚
åœ¨æˆ‘ä»¬æ·±å…¥æ¢ç´¢RAGç³»ç»Ÿæå‡çš„å„ç§æ–¹æ³•ä¹‹å‰ï¼Œæœ‰ä¸€ä¸ªåŸºæœ¬é—®é¢˜éœ€è¦è§£å†³ï¼šæˆ‘ä»¬å¦‚ä½•å‡†ç¡®åœ°è¯„ä¼°ä¸€ä¸ªRAGç³»ç»Ÿçš„æ€§èƒ½ï¼Ÿè¿™å°±åƒæ˜¯åœ¨æœºå™¨å­¦ä¹ æˆ–æ·±åº¦å­¦ä¹ ä»»åŠ¡ä¸­æ²¡æœ‰ç»™å®šçš„æµ‹è¯•é›†å’Œè¯„ä»·æ ‡å‡†ï¼Œæˆ‘ä»¬éš¾ä»¥åˆ¤æ–­å®éªŒçš„æˆåŠŸä¸å¦ã€‚
å› æ­¤ï¼Œæœ¬ç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« å°†èšç„¦äºä»‹ç»RAGç³»ç»Ÿçš„è¯„ä»·æ–¹æ³•ã€ç›¸å…³æŒ‡æ ‡ä»¥åŠæµ‹è¯•æ¡†æ¶ï¼Œä¸ºæˆ‘ä»¬æ¥ä¸‹æ¥çš„æ¢ç´¢è®¾å®šæ˜ç¡®çš„æ ‡å‡†å’Œç›®æ ‡ã€‚
æµ‹è¯•æ¡†æ¶ ä»¥ä¸‹æ˜¯ä¸€äº›æµ‹è¯•æ¡†æ¶ï¼Œä¸ºRAGç³»ç»Ÿè¯„ä¼°æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚
TruLens TruLensæä¾›äº†ä¸€ä¸ªç‹¬ç‰¹çš„è§†è§’æ¥è¯„ä¼°å’Œè·Ÿè¸ªå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å®éªŒï¼Œé€šè¿‡ä¸€ç³»åˆ—åˆ›æ–°çš„åŠŸèƒ½å’Œæ–¹æ³•ï¼Œå¸®åŠ©å¼€å‘è€…å’Œç ”ç©¶äººå‘˜æ›´æ·±å…¥åœ°äº†è§£æ¨¡å‹æ€§èƒ½å’Œè¡Œä¸ºã€‚
TruLensçš„åé¦ˆåŠŸèƒ½ï¼ˆFeedback Functionsï¼‰æ˜¯å…¶æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ï¼Œæä¾›äº†ä¸€ç§ç¨‹åºåŒ–çš„æ–¹æ³•æ¥è¯„ä¼°åº”ç”¨çš„è¿è¡Œè¡¨ç°ã€‚è¿™äº›å‡½æ•°ä»â€œå¯æ‰©å±•æ€§â€å’Œâ€œæœ‰æ„ä¹‰æ€§â€ä¸¤ä¸ªç»´åº¦å‡ºå‘ï¼Œè€ƒè™‘è¯„ä¼°çš„èŒƒå›´ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›æœ‰ä»·å€¼çš„åé¦ˆï¼Œå¸®åŠ©ä»–ä»¬ç†è§£å’Œæ”¹è¿›ä»–ä»¬çš„LLMåº”ç”¨ã€‚
åœ¨RAGåº”ç”¨ä¸­ï¼Œæä¾›å‡†ç¡®çš„ä¸Šä¸‹æ–‡ä¿¡æ¯è‡³å…³é‡è¦ï¼Œä»¥é¿å…ç”Ÿæˆä¸çœŸå®çš„â€œå¹»è§‰â€ç­”æ¡ˆã€‚TruLensé‡‡ç”¨äº†åˆ›æ–°æ€§çš„RAGä¸‰å…ƒç»„è¯„ä¼°æ–¹æ³•ï¼Œä¸“é—¨é’ˆå¯¹RAGæ¶æ„çš„æ¯ä¸ªç¯èŠ‚è¿›è¡Œå¹»è§‰é£é™©è¯„ä¼°ï¼Œç¡®ä¿æ¨¡å‹çš„æ¯ä¸ªéƒ¨åˆ†éƒ½èƒ½æœ‰æ•ˆåœ°å·¥ä½œï¼Œä»è€Œå‡å°‘è¯¯å¯¼ä¿¡æ¯çš„äº§ç”Ÿã€‚
ä¸Šä¸‹æ–‡ç›¸å…³æ€§ï¼ˆContext Relevanceï¼‰ ä¸Šä¸‹æ–‡ç›¸å…³æ€§æ˜¯è¯„ä¼°RAGåº”ç”¨çš„ç¬¬ä¸€æ­¥ï¼Œç¡®ä¿æ¯ä¸€æ®µæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡éƒ½ä¸æå‡ºçš„æŸ¥è¯¢ç´§å¯†ç›¸å…³ã€‚TruLensåˆ©ç”¨åºåˆ—åŒ–è®°å½•çš„ç»“æ„æ¥è¯„ä¼°ä¸Šä¸‹æ–‡çš„ç›¸å…³æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªå…³é”®çš„æ­¥éª¤ï¼Œç¡®ä¿æ¨¡å‹åœ¨æ­£ç¡®çš„ä¿¡æ¯ä¸Šç”Ÿæˆå›ç­”ã€‚
çœŸå®æ€§ï¼ˆGroundednessï¼‰ åœ¨æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¿¡æ¯çš„åŸºç¡€ä¸Šï¼Œå¤§å‹è¯­è¨€æ¨¡å‹å°†ç”Ÿæˆç­”æ¡ˆã€‚TruLenså¼ºè°ƒäº†ç‹¬ç«‹éªŒè¯æ¯ä¸ªå›ç­”çš„é‡è¦æ€§ï¼Œä»¥ç¡®ä¿å®ƒä»¬åŸºäºå¯é ä¿¡æ¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿåœ¨æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä¸­æ‰¾åˆ°æ”¯æŒçš„è¯æ®ã€‚è¿™ä¸€æ­¥éª¤æ˜¯ç¡®ä¿æ¨¡å‹å›ç­”çš„çœŸå®æ€§å’Œå¯é æ€§çš„å…³é”®ã€‚
ç­”æ¡ˆç›¸å…³æ€§ï¼ˆAnswer Relevanceï¼‰ æœ€åï¼Œè¯„ä¼°éœ€è¦ç¡®ä¿æœ€ç»ˆå›ç­”æœ‰æ•ˆåœ°è§£ç­”äº†åŸå§‹é—®é¢˜ï¼Œè¿™é€šè¿‡è¯„ä¼°åº”ç”¨çš„æœ€ç»ˆå›ç­”ä¸ç”¨æˆ·è¾“å…¥çš„ç›¸å…³æ€§æ¥å®ç°ã€‚è¿™ä¸€è¿‡ç¨‹ç¡®ä¿äº†æ¨¡å‹çš„è¾“å‡ºä¸ä»…æ˜¯çœŸå®çš„ï¼Œè€Œä¸”æ˜¯å¯¹ç”¨æˆ·æŸ¥è¯¢æœ‰ç”¨çš„ã€‚
TruLensè¿˜æå‡ºäº†â€œè¯šå®ã€æ— å®³å’Œæœ‰å¸®åŠ©â€çš„è¯„ä¼°åŸåˆ™ï¼ˆHonest, Harmless, and Helpful Evaluationsï¼‰ï¼Œè¿™äº›åŸåˆ™æ—¨åœ¨ç¡®ä¿LLMåº”ç”¨åœ¨æä¾›å¸®åŠ©çš„åŒæ—¶ï¼Œä¹Ÿæ˜¯å®‰å…¨å’Œå¯ä¿¡çš„ã€‚
Ragas Ragasæ¡†æ¶ä¸“ä¸ºè¯„ä¼°æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ç³»ç»Ÿè€Œè®¾è®¡ï¼Œå®šä¹‰äº†å››ä¸ªæ ¸å¿ƒè¯„ä¼°æŒ‡æ ‡ï¼šä¸Šä¸‹æ–‡ç›¸å…³æ€§ï¼ˆcontext_relevancyï¼‰ã€ä¸Šä¸‹æ–‡å›æº¯ï¼ˆcontext_recallï¼‰ã€å¿ å®åº¦ï¼ˆfaithfulnessï¼‰å’Œç­”æ¡ˆç›¸å…³æ€§ï¼ˆanswer_relevancyï¼‰ã€‚è¿™äº›æŒ‡æ ‡å…±åŒæ„æˆäº†Ragasçš„è¯„åˆ†ä½“ç³»ï¼Œæä¾›äº†ä¸€ä¸ªå…¨é¢çš„æ–¹æ³•æ¥è¯„ä»·RAGç³»ç»Ÿçš„æ€§èƒ½ã€‚
æ­¤å¤–ï¼ŒRagaså·§å¦™åœ°åˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è¿›è¡Œæ— å‚è€ƒè¯„ä¼°ï¼Œæœ‰æ•ˆé™ä½äº†è¯„ä¼°æˆæœ¬ã€‚é€šè¿‡è¿™ç§æ–¹æ³•ï¼ŒRagasèƒ½å¤Ÿæä¾›ä¸€ç§æ—¢ç»æµåˆæœ‰æ•ˆçš„æ–¹å¼æ¥è¯„ä¼°RAGç³»ç»Ÿï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§é‡æ•°æ®å’Œå¤æ‚æŸ¥è¯¢æ—¶ã€‚
å…¶ä»–æµ‹è¯•æ¡†æ¶
DeepEval
DeepEval How to Evaluate RAG Applications in CI/CD Pipelines with DeepEval
ARES
github: https://github.com/stanford-futuredata/ARES
Paper: ARES: An Automated Evaluation Framework for Retrieval-Augmented Generation Systems
LangChain Evals
Llama Index Evals
UpTrain
æ•°æ® åœ¨è¯„ä¼°æ•°æ®é›†æ—¶ï¼Œä¸å¿…ä¾èµ–äººå·¥æ ‡æ³¨çš„æ ‡å‡†ç­”æ¡ˆï¼Œè€Œæ˜¯é€šè¿‡åº•å±‚çš„å¤§è¯­è¨€æ¨¡å‹ (LLM) æ¥è¿›è¡Œè¯„ä¼°ã€‚
...</p>
  </div>
  <footer class="entry-footer"><span title='2024-04-08 11:00:00 +0800 CST'>April 8, 2024</span>&nbsp;Â·&nbsp;6 min&nbsp;Â·&nbsp;Theme PaperMod</footer>
  <a class="entry-link" aria-label="post link to RAGå·¥å…·ç®±ï¼šè¯„ä¼°RAGç³»ç»Ÿçš„æ–¹æ³•è®º" href="https://niraya666.github.io/posts/rag_toolkit_eval/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="https://niraya666.github.io/page/2/">Next&nbsp;2/2&nbsp;Â»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://niraya666.github.io/">LZY Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
